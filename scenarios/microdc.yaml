scenario: minidc
ships:
    # app: builder
    dc-app-builder-web:
        replicas: 1
        binary_name: build_ui
        tags:
            - key: location
              value: dc
            - key: type
              value: app
            - key: service
              value: builder
            - key: name
              value: ui
        clients:
            - dc-app-builder-build-broker:8080
            - dc-infra-active-directory:389
    dc-app-builder-build-broker:
        replicas: 1
        binary_name: build_broker
        servers:
            - 8080
        tags:
            - key: location
              value: dc
            - key: type
              value: app
            - key: service
              value: builder
            - key: name
              value: build-broker
        clients:
            - dc-app-builder-build-region-1:441
            - dc-app-builder-build-region-2:442
            - dc-app-builder-build-region-3:443
            - dc-app-builder-build-region-4:444
            - dc-app-builder-build-region-5:445
            - dc-app-builder-build-region-6:446
    dc-app-builder-build-region-1:
        replicas: 1
        binary_name: build_region
        servers:
            - 441
        tags:
            - key: location
              value: dc
            - key: type
              value: app
            - key: service
              value: builder
            - key: name
              value: builder-region-1
        clients:
            - dc-service-message-queue:5672
            - dc-db-postgres:4306
            - dc-db-oracle:3306
            - dc-service-docker-registry:8008
            - dc-service-github:1337
    dc-app-builder-build-region-2:
        replicas: 1
        binary_name: build_region
        servers:
            - 442
        tags:
            - key: location
              value: dc
            - key: type
              value: app
            - key: service
              value: builder
            - key: name
              value: builder-region-2
        clients:
            - dc-service-message-queue:5672
            - dc-db-postgres:4306
            - dc-db-oracle:3306
            - dc-service-docker-registry:8008
            - dc-service-github:1337
    dc-app-builder-build-region-3:
        replicas: 1
        binary_name: build_region
        servers:
            - 443
        tags:
            - key: location
              value: dc
            - key: type
              value: app
            - key: service
              value: builder
            - key: name
              value: builder-region-3
        clients:
            - dc-service-message-queue:5672
            - dc-db-postgres:4306
            - dc-db-oracle:3306
            - dc-service-docker-registry:8008
            - dc-service-github:1337

    # app: payment
    dc-app-payment-frontend:
        replicas: 1
        binary_name: payment_ui
        tags:
            - key: location
              value: dc
            - key: type
              value: app
            - key: service
              value: payment
            - key: name
              value: frontend
        clients:
            - dc-app-payment-card-processing-broker:80
            - dc-app-payment-bill-generator:4000
            - dc-infra-active-directory:389
    dc-app-payment-card-processing-broker:
        replicas: 1
        binary_name: card_broker
        servers:
            - 80
        tags:
            - key: location
              value: dc
            - key: type
              value: app
            - key: service
              value: payment
            - key: name
              value: card-processing-broker
        clients:
            - dc-app-payment-card-processing-active:9000
            - dc-app-payment-card-processing-standby:9001
            - dc-service-key-value-store:6379
    dc-app-payment-card-processing-active:
        replicas: 1
        binary_name:  card_processor_java
        servers:
            - 9000
        tags:
            - key: location
              value: dc
            - key: type
              value: app
            - key: service
              value: payment
            - key: name
              value: card-processing-active
        clients:
            - dc-service-message-queue:5672
            - dc-db-postgres:4306
            - dc-service-key-value-store:6379
    dc-app-payment-card-processing-standby:
        replicas: 1
        binary_name:  card_processor_java
        servers:
            - 9001
        tags:
            - key: location
              value: dc
            - key: type
              value: app
            - key: service
              value: payment
            - key: name
              value: card-processing-standby
        clients:
            - dc-service-message-queue:5672
            - dc-db-postgres:4306
            - dc-service-key-value-store:6379
    dc-app-payment-bill-generator:
        replicas: 1
        binary_name: bill_generator
        servers:
            - 4000
        tags:
            - key: location
              value: dc
            - key: type
              value: app
            - key: service
              value: payment
            - key: name
              value: bill-generator
        clients:
            - dc-service-message-queue:5672
            - dc-db-postgres:4306
            - dc-service-key-value-store:6379
            - dc-infra-smtp:25

    # services
    dc-infra-active-directory:
        replicas: 1
        binary_name: active_directory.exe
        tags:
            - key: location
              value: dc
            - key: type
              value: infra
            - key: service
              value: active-directory
            - key: name
              value: active-directory
        servers:
            - 389
    dc-infra-smtp:
        binary_name: smtpd
        replicas: 1
        tags:
            - key: location
              value: dc
            - key: type
              value: infra
            - key: service
              value: smtp
            - key: name
              value: smtp
        clients:
            - dc-infra-active-directory:389
        servers:
            - 25
    dc-service-message-queue:
        replicas: 1
        binary_name: rabbitmq
        tags:
            - key: location
              value: dc
            - key: type
              value: service
            - key: service
              value: message-queue
            - key: name
              value: message-queue
        servers:
            - 5672
    dc-service-key-value-store:
        replicas: 1
        binary_name: redis
        tags:
            - key: location
              value: dc
            - key: type
              value: service
            - key: service
              value: key-value-store
            - key: name
              value: key-value-store
        servers:
            - 6379
    dc-service-docker-registry:
        replicas: 1
        binary_name: docker_registry_daemon
        tags:
            - key: location
              value: dc
            - key: type
              value: service
            - key: service
              value: registry
            - key: name
              value: registry
        clients:
            - dc-infra-active-directory:389
        servers:
            - 8008
    dc-service-github:
        replicas: 1
        binary_name: github_daemon
        tags:
            - key: location
              value: dc
            - key: type
              value: service
            - key: service
              value: github
            - key: name
              value: github
        clients:
            - dc-infra-active-directory:389
        servers:
            - 1337

    # databases
    dc-db-oracle:
        replicas: 1
        binary_name: oracled
        tags:
            - key: location
              value: dc
            - key: type
              value: db
            - key: service
              value: oracle
            - key: name
              value: oracle-frontend
        clients:
            - dc-db-oracle-active:33010
            - dc-db-oracle-standby:33011
        servers:
            - 3306
    dc-db-oracle-active:
        replicas: 1
        binary_name: oracled
        tags:
            - key: location
              value: dc
            - key: type
              value: db
            - key: service
              value: oracle
            - key: name
              value: oracle-active
        clients:
            - dc-db-oracle-standby:4567
        servers:
            - 4567
            - 33010
    dc-db-oracle-standby:
        replicas: 1
        binary_name: oracled
        tags:
            - key: location
              value: dc
            - key: type
              value: db
            - key: service
              value: oracle
            - key: name
              value: oracle-standby
        clients:
            - dc-db-oracle-active:4567
        servers:
            - 4567
            - 33011

    dc-db-postgres:
        replicas: 1
        binary_name: postgres
        tags:
            - key: location
              value: dc
            - key: type
              value: db
            - key: service
              value: postgres
            - key: name
              value: postgres-frontend
        clients:
            - dc-db-postgres-active:43010
            - dc-db-postgres-standby:43011
        servers:
            - 4306
    dc-db-postgres-active:
        replicas: 1
        binary_name: postgres
        tags:
            - key: location
              value: dc
            - key: type
              value: db
            - key: service
              value: postgres
            - key: name
              value: postgres-active
        servers:
            - 43010
    dc-db-postgres-standby:
        replicas: 1
        binary_name: postgres
        tags:
            - key: location
              value: dc
            - key: type
              value: db
            - key: service
              value: postgres
            - key: name
              value: postgres-standby
        servers:
            - 43011
